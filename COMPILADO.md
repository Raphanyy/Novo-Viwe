# üîó VIWE - COMPILADO COMPLETO

**Data de Compila√ß√£o:** 2025-01-25  
**Vers√£o da API:** 1.0.0  
**Status do Banco:** 19/19 tabelas ativas  
**Ambiente:** Desenvolvimento/Produ√ß√£o

---

## üìã √çNDICE

1. [üöÄ **APIS E ENDPOINTS**](#apis-e-endpoints)
2. [üóÑÔ∏è **QUERIES SQL COMPLETAS**](#queries-sql-completas)
3. [üèóÔ∏è **ESTRUTURA DO BANCO DE DADOS**](#estrutura-do-banco-de-dados)
4. [üîß **CONFIGURA√á√ïES E VARI√ÅVEIS**](#configura√ß√µes-e-vari√°veis)
5. [üìÅ **ARQUITETURA DO PROJETO**](#arquitetura-do-projeto)
6. [üîë **MIDDLEWARES E SEGURAN√áA**](#middlewares-e-seguran√ßa)
7. [‚ö° **SERVI√áOS INTEGRADOS**](#servi√ßos-integrados)

---

# üöÄ APIS E ENDPOINTS

## **Base URL:** `http://localhost:8080`

### üîê **AUTENTICA√á√ÉO** `/api/auth`

| M√©todo | Endpoint             | Par√¢metros                  | Descri√ß√£o                 |
| ------ | -------------------- | --------------------------- | ------------------------- |
| `POST` | `/api/auth/register` | `{ name, email, password }` | Registrar novo usu√°rio    |
| `POST` | `/api/auth/login`    | `{ email, password }`       | Autenticar usu√°rio        |
| `POST` | `/api/auth/refresh`  | `{ refreshToken }`          | Renovar access token      |
| `POST` | `/api/auth/logout`   | Headers: `Authorization`    | Invalida sess√µes (logout) |
| `GET`  | `/api/auth/me`       | Headers: `Authorization`    | Dados do usu√°rio atual    |
| `GET`  | `/api/auth/test`     | Headers: `Authorization`    | Teste de autentica√ß√£o     |

### üó∫Ô∏è **ROTAS** `/api/routes`

| M√©todo   | Endpoint            | Par√¢metros                                        | Descri√ß√£o                  |
| -------- | ------------------- | ------------------------------------------------- | -------------------------- |
| `GET`    | `/api/routes`       | `?status&limit&offset&search&orderBy&order`       | Listar rotas do usu√°rio    |
| `GET`    | `/api/routes/:id`   | Path: `id`                                        | Obter rota espec√≠fica      |
| `POST`   | `/api/routes`       | `{ name, description, stops, clients, routeSet }` | Criar nova rota            |
| `PATCH`  | `/api/routes/:id`   | `{ name, description, status, scheduledDate }`    | Atualizar rota             |
| `DELETE` | `/api/routes/:id`   | Path: `id`                                        | Deletar rota (soft delete) |
| `GET`    | `/api/routes/stats` | -                                                 | Estat√≠sticas das rotas     |

### üß≠ **NAVEGA√á√ÉO** `/api/navigation`

| M√©todo   | Endpoint                            | Par√¢metros                                                | Descri√ß√£o                   |
| -------- | ----------------------------------- | --------------------------------------------------------- | --------------------------- |
| `POST`   | `/api/navigation/start`             | `{ routeId }`                                             | Iniciar sess√£o de navega√ß√£o |
| `PATCH`  | `/api/navigation/:id`               | `{ currentStopIndex, currentLatitude, currentLongitude }` | Atualizar posi√ß√£o           |
| `POST`   | `/api/navigation/:id/pause`         | Path: `id`                                                | Pausar navega√ß√£o            |
| `POST`   | `/api/navigation/:id/resume`        | Path: `id`                                                | Retomar navega√ß√£o           |
| `POST`   | `/api/navigation/:id/complete-stop` | `{ stopId, timeSpent, notes }`                            | Completar parada            |
| `POST`   | `/api/navigation/:id/stop`          | `{ reason }`                                              | Finalizar navega√ß√£o         |
| `DELETE` | `/api/navigation/:id`               | Path: `id`                                                | Cancelar navega√ß√£o          |
| `GET`    | `/api/navigation/:id`               | Path: `id`                                                | Detalhes da sess√£o          |

### üåç **MAPBOX** `/api/mapbox`

| M√©todo | Endpoint                   | Par√¢metros                                          | Descri√ß√£o                     |
| ------ | -------------------------- | --------------------------------------------------- | ----------------------------- |
| `GET`  | `/api/mapbox/geocoding`    | `?q&limit&country&types&proximity`                  | Geocoding (endere√ßo ‚Üí coords) |
| `GET`  | `/api/mapbox/reverse`      | `?lat&lng&country&types`                            | Reverse geocoding             |
| `POST` | `/api/mapbox/directions`   | `{ coordinates[], profile, overview, steps }`       | Calcular rota                 |
| `POST` | `/api/mapbox/optimization` | `{ coordinates[], profile, roundtrip }`             | Otimiza√ß√£o de rotas           |
| `POST` | `/api/mapbox/matrix`       | `{ coordinates[], profile, sources, destinations }` | Matriz de dist√¢ncias          |
| `GET`  | `/api/mapbox/isochrone`    | `?lat&lng&minutes&profile`                          | Calcular isocronas            |
| `GET`  | `/api/mapbox/health`       | -                                                   | Status dos servi√ßos Mapbox    |

### üë§ **USU√ÅRIOS** `/api/user`

| M√©todo   | Endpoint                        | Par√¢metros                                         | Descri√ß√£o                  |
| -------- | ------------------------------- | -------------------------------------------------- | -------------------------- |
| `GET`    | `/api/user`                     | -                                                  | Dados completos do usu√°rio |
| `PATCH`  | `/api/user`                     | `{ name, phone, company, country, city }`          | Atualizar perfil           |
| `PATCH`  | `/api/user/preferences`         | `{ theme, language, pushNotifications, fontSize }` | Atualizar prefer√™ncias     |
| `POST`   | `/api/user/avatar`              | `{ avatarUrl }`                                    | Atualizar avatar           |
| `POST`   | `/api/user/change-password`     | `{ currentPassword, newPassword }`                 | Alterar senha              |
| `DELETE` | `/api/user`                     | `{ password, reason }`                             | Excluir conta              |
| `GET`    | `/api/user/sessions`            | -                                                  | Listar sess√µes ativas      |
| `DELETE` | `/api/user/sessions/:sessionId` | Path: `sessionId`                                  | Revogar sess√£o             |

### üè¢ **CLIENTES** `/api/clients`

| M√©todo   | Endpoint                    | Par√¢metros                                              | Descri√ß√£o                |
| -------- | --------------------------- | ------------------------------------------------------- | ------------------------ |
| `GET`    | `/api/clients`              | `?search&isActive&limit&offset&orderBy`                 | Listar clientes          |
| `GET`    | `/api/clients/:id`          | Path: `id`                                              | Obter cliente espec√≠fico |
| `POST`   | `/api/clients`              | `{ name, email, phone, company, address, coordinates }` | Criar cliente            |
| `PATCH`  | `/api/clients/:id`          | `{ name, email, phone, address }`                       | Atualizar cliente        |
| `DELETE` | `/api/clients/:id`          | Path: `id`                                              | Deletar cliente          |
| `POST`   | `/api/clients/:id/activate` | `{ isActive }`                                          | Ativar/desativar cliente |
| `GET`    | `/api/clients/stats`        | -                                                       | Estat√≠sticas de clientes |
| `GET`    | `/api/clients/:id/nearby`   | `?radius`                                               | Clientes pr√≥ximos        |

### üîî **NOTIFICA√á√ïES** `/api/notifications`

| M√©todo   | Endpoint                           | Par√¢metros                          | Descri√ß√£o               |
| -------- | ---------------------------------- | ----------------------------------- | ----------------------- |
| `GET`    | `/api/notifications`               | `?read&type&limit&offset&orderBy`   | Listar notifica√ß√µes     |
| `POST`   | `/api/notifications/:id/read`      | Path: `id`                          | Marcar como lida        |
| `POST`   | `/api/notifications/mark-all-read` | -                                   | Marcar todas como lidas |
| `POST`   | `/api/notifications/:id/archive`   | Path: `id`                          | Arquivar notifica√ß√£o    |
| `DELETE` | `/api/notifications/:id`           | Path: `id`                          | Deletar notifica√ß√£o     |
| `POST`   | `/api/notifications/create`        | `{ type, title, message, details }` | Criar notifica√ß√£o       |
| `GET`    | `/api/notifications/stats`         | -                                   | Estat√≠sticas            |

### üí≥ **BILLING** `/api/billing`

| M√©todo | Endpoint                       | Par√¢metros                    | Descri√ß√£o                 |
| ------ | ------------------------------ | ----------------------------- | ------------------------- |
| `GET`  | `/api/billing/plans`           | -                             | Listar planos dispon√≠veis |
| `GET`  | `/api/billing/subscription`    | -                             | Assinatura atual          |
| `POST` | `/api/billing/subscribe`       | `{ planId, paymentMethodId }` | Criar assinatura          |
| `POST` | `/api/billing/cancel`          | `{ reason }`                  | Cancelar assinatura       |
| `GET`  | `/api/billing/history`         | `?limit&offset`               | Hist√≥rico de pagamentos   |
| `GET`  | `/api/billing/usage`           | -                             | Uso atual da assinatura   |
| `POST` | `/api/billing/webhooks/stripe` | Stripe payload                | Webhook Stripe            |

### üìä **DASHBOARD** `/api/dashboard`

| M√©todo | Endpoint                       | Par√¢metros | Descri√ß√£o               |
| ------ | ------------------------------ | ---------- | ----------------------- |
| `GET`  | `/api/dashboard/stats`         | -          | Estat√≠sticas gerais     |
| `GET`  | `/api/dashboard/recent-routes` | `?limit`   | Rotas recentes          |
| `GET`  | `/api/dashboard/consumption`   | -          | Dados de consumo        |
| `GET`  | `/api/dashboard/activity`      | `?limit`   | Atividade recente       |
| `GET`  | `/api/dashboard/insights`      | -          | Insights personalizados |

### üìç **POIS** `/api/pois`

| M√©todo   | Endpoint                     | Par√¢metros                                     | Descri√ß√£o          |
| -------- | ---------------------------- | ---------------------------------------------- | ------------------ |
| `GET`    | `/api/pois`                  | `?lat&lng&radius&category&search&limit`        | Listar POIs        |
| `GET`    | `/api/pois/categories`       | -                                              | Categorias de POIs |
| `GET`    | `/api/pois/:id`              | Path: `id`                                     | Detalhes do POI    |
| `POST`   | `/api/pois`                  | `{ name, category, description, coordinates }` | Criar POI          |
| `PATCH`  | `/api/pois/:id`              | `{ name, description, coordinates }`           | Atualizar POI      |
| `DELETE` | `/api/pois/:id`              | Path: `id`                                     | Deletar POI        |
| `GET`    | `/api/pois/nearby/:lat/:lng` | `?radius&category&limit`                       | POIs pr√≥ximos      |

### ‚öôÔ∏è **SISTEMA**

| M√©todo | Endpoint    | Par√¢metros | Descri√ß√£o             |
| ------ | ----------- | ---------- | --------------------- |
| `GET`  | `/health`   | -          | Health check completo |
| `GET`  | `/api`      | -          | Informa√ß√µes da API    |
| `GET`  | `/api/test` | -          | Teste b√°sico          |

---

# üóÑÔ∏è QUERIES SQL COMPLETAS

## üîê **AUTENTICA√á√ÉO E USU√ÅRIOS**

### **Registro de Usu√°rio**

```sql
-- Verificar se email j√° existe
SELECT id FROM users WHERE email = $1;

-- Criar novo usu√°rio
INSERT INTO users (name, email, password_hash)
VALUES ($1, $2, $3)
RETURNING id, name, email, created_at;

-- Criar prefer√™ncias padr√£o
INSERT INTO user_preferences (user_id) VALUES ($1);

-- Criar sess√£o de autentica√ß√£o
INSERT INTO auth_sessions (user_id, refresh_token, refresh_token_hash, expires_at)
VALUES ($1, $2, $3, NOW() + INTERVAL '30 days');
```

### **Login de Usu√°rio**

```sql
-- Buscar usu√°rio por email
SELECT id, name, email, password_hash, is_active, is_email_verified
FROM users
WHERE email = $1 AND deleted_at IS NULL;

-- Atualizar √∫ltimo login
UPDATE users SET last_login_at = NOW() WHERE id = $1;

-- Validar refresh token
SELECT s.*, u.id, u.name, u.email, u.is_active
FROM auth_sessions s
JOIN users u ON s.user_id = u.id
WHERE s.refresh_token = $1 AND s.is_active = true AND s.expires_at > NOW();
```

### **Gest√£o de Sess√µes**

```sql
-- Invalidar todas as sess√µes (logout)
UPDATE auth_sessions SET is_active = FALSE WHERE user_id = $1;

-- Listar sess√µes ativas
SELECT id, refresh_token, created_at, expires_at, user_agent, ip_address
FROM auth_sessions
WHERE user_id = $1 AND is_active = true AND expires_at > NOW();

-- Revogar sess√£o espec√≠fica
UPDATE auth_sessions SET is_active = FALSE
WHERE id = $1 AND user_id = $2;
```

## üó∫Ô∏è **ROTAS E NAVEGA√á√ÉO**

### **Gest√£o de Rotas**

```sql
-- Listar rotas do usu√°rio
SELECT r.*,
       COUNT(rs.id) as stop_count,
       rm.total_distance,
       rm.estimated_duration,
       rm.fuel_consumption
FROM routes r
LEFT JOIN route_stops rs ON r.id = rs.route_id
LEFT JOIN route_metrics rm ON r.id = rm.route_id
WHERE r.user_id = $1 AND r.deleted_at IS NULL
GROUP BY r.id, rm.id
ORDER BY r.created_at DESC;

-- Criar nova rota
INSERT INTO routes (name, description, user_id, responsible, priority, status, route_type, created_at)
VALUES ($1, $2, $3, $4, $5, 'draft', $6, NOW())
RETURNING *;

-- Criar paradas da rota
INSERT INTO route_stops (route_id, stop_order, name, address, latitude, longitude, client_id, estimated_duration)
VALUES ($1, $2, $3, $4, $5, $6, $7, $8)
RETURNING *;

-- Atualizar rota
UPDATE routes
SET name = $1, description = $2, status = $3, scheduled_date = $4, updated_at = NOW()
WHERE id = $5 AND user_id = $6
RETURNING *;

-- Soft delete rota
UPDATE routes SET deleted_at = NOW() WHERE id = $1 AND user_id = $2;
```

### **Sess√µes de Navega√ß√£o**

```sql
-- Iniciar navega√ß√£o
INSERT INTO navigation_sessions (route_id, user_id, status, navigation_mode, start_time, total_distance, remaining_distance, estimated_fuel_consumption)
VALUES ($1, $2, 'active', $3, NOW(), $4, $4, $5)
RETURNING *;

-- Atualizar posi√ß√£o da navega√ß√£o
UPDATE navigation_sessions
SET current_stop_index = $1,
    current_latitude = $2,
    current_longitude = $3,
    active_time = $4,
    remaining_distance = $5,
    updated_at = NOW()
WHERE id = $6 AND user_id = $7
RETURNING *;

-- Completar parada
UPDATE route_stops
SET is_completed = true,
    completed_at = NOW(),
    time_spent_at_stop = $1,
    notes = $2
WHERE id = $3
RETURNING *;

-- Verificar se todas as paradas foram completadas
SELECT COUNT(*)
FROM route_stops
WHERE route_id = $1 AND is_completed = false;

-- Finalizar navega√ß√£o
UPDATE navigation_sessions
SET status = 'completed', end_time = NOW()
WHERE id = $1;

-- Inserir m√©tricas da rota
INSERT INTO route_metrics (route_id, total_distance, estimated_duration, actual_duration, fuel_consumption, fuel_savings, time_savings)
VALUES ($1, $2, $3, $4, $5, $6, $7);
```

## üè¢ **CLIENTES**

### **Gest√£o de Clientes**

```sql
-- Listar clientes do usu√°rio
SELECT c.*,
       COUNT(rs.id) as route_count
FROM clients c
LEFT JOIN route_stops rs ON c.id = rs.client_id
WHERE c.user_id = $1 AND c.deleted_at IS NULL
GROUP BY c.id
ORDER BY c.name ASC;

-- Criar cliente
INSERT INTO clients (name, email, phone, company, address, city, state, country, latitude, longitude, notes, tags, user_id)
VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13)
RETURNING *;

-- Buscar clientes pr√≥ximos (Haversine)
SELECT c.*,
       ROUND(6371000 * acos(
         cos(radians($2)) * cos(radians(c.latitude)) *
         cos(radians(c.longitude) - radians($3)) +
         sin(radians($2)) * sin(radians(c.latitude))
       )) as distance
FROM clients c
WHERE c.user_id = $1 AND c.deleted_at IS NULL
HAVING distance <= $4
ORDER BY distance ASC
LIMIT 20;
```

## üìç **PONTOS DE INTERESSE (POIs)**

### **Gest√£o de POIs**

```sql
-- Listar POIs com dist√¢ncia (quando coordenadas fornecidas)
SELECT p.id, p.name, p.type as category, p.description, p.latitude, p.longitude,
       p.address, p.phone, p.website, p.business_hours, p.rating,
       CASE WHEN p.user_id = $1 THEN true ELSE false END as is_user_poi,
       ROUND(6371000 * acos(
         cos(radians($2)) * cos(radians(p.latitude)) *
         cos(radians(p.longitude) - radians($3)) +
         sin(radians($2)) * sin(radians(p.latitude))
       )) as distance
FROM pois p
WHERE p.deleted_at IS NULL
ORDER BY distance ASC
LIMIT $4 OFFSET $5;

-- Criar POI personalizado
INSERT INTO pois (name, type, description, latitude, longitude, address, phone, website, business_hours, metadata, user_id, created_at, updated_at)
VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, NOW(), NOW())
RETURNING *;

-- Categorias de POIs
SELECT type as category,
       COUNT(*) as count,
       AVG(rating) as avg_rating
FROM pois
WHERE deleted_at IS NULL AND type IS NOT NULL
GROUP BY type;
```

## üí≥ **BILLING E ASSINATURAS**

### **Gest√£o de Planos**

```sql
-- Listar planos dispon√≠veis
SELECT * FROM plans WHERE is_active = true ORDER BY price_cents ASC;

-- Obter assinatura atual
SELECT s.*, p.name as plan_name, p.description as plan_description,
       p.price_cents, p.routes_limit, p.api_calls_limit
FROM subscriptions s
JOIN plans p ON s.plan_id = p.id
WHERE s.user_id = $1 AND s.status IN ('active','trialing')
ORDER BY s.created_at DESC
LIMIT 1;

-- Criar nova assinatura
INSERT INTO subscriptions (user_id, plan_id, status, start_date, end_date, amount_cents, currency, billing_period, routes_limit)
VALUES ($1, $2, 'active', NOW(), $3, $4, 'BRL', 'monthly', $5)
RETURNING *;

-- Hist√≥rico de pagamentos
SELECT ph.*, s.id as subscription_id, p.name as plan_name
FROM payment_history ph
LEFT JOIN subscriptions s ON ph.subscription_id = s.id
LEFT JOIN plans p ON s.plan_id = p.id
WHERE ph.user_id = $1
ORDER BY ph.created_at DESC;
```

## üîî **NOTIFICA√á√ïES**

### **Gest√£o de Notifica√ß√µes**

```sql
-- Listar notifica√ß√µes do usu√°rio
SELECT * FROM notifications
WHERE user_id = $1 AND deleted_at IS NULL
ORDER BY created_at DESC
LIMIT $2 OFFSET $3;

-- Marcar como lida
UPDATE notifications
SET read_at = NOW(), updated_at = NOW()
WHERE id = $1 AND user_id = $2 AND read_at IS NULL;

-- Marcar todas como lidas
UPDATE notifications
SET read_at = NOW(), updated_at = NOW()
WHERE user_id = $1 AND read_at IS NULL;

-- Criar notifica√ß√£o
INSERT INTO notifications (user_id, type, title, message, details, actionable, action_url, action_label, route_id, navigation_session_id, icon, color, priority, expires_at)
VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14);
```

## üìä **DASHBOARD E ESTAT√çSTICAS**

### **Estat√≠sticas Gerais**

```sql
-- Stats do dashboard
SELECT
  (SELECT COUNT(*) FROM routes WHERE user_id = $1 AND deleted_at IS NULL) as total_routes,
  (SELECT COUNT(*) FROM routes WHERE user_id = $1 AND status = 'completed' AND deleted_at IS NULL) as completed_routes,
  (SELECT COALESCE(SUM(rm.total_distance), 0) FROM route_metrics rm JOIN routes r ON rm.route_id = r.id WHERE r.user_id = $1) as total_distance,
  (SELECT COALESCE(SUM(rm.time_savings), 0) FROM route_metrics rm JOIN routes r ON rm.route_id = r.id WHERE r.user_id = $1) as time_saved,
  (SELECT COALESCE(SUM(rm.fuel_savings), 0) FROM route_metrics rm JOIN routes r ON rm.route_id = r.id WHERE r.user_id = $1) as fuel_saved;

-- Rotas recentes
SELECT r.id, r.name, r.status, r.created_at, r.completed_at,
       COUNT(rs.id) as stop_count,
       rm.total_distance, rm.estimated_duration
FROM routes r
LEFT JOIN route_stops rs ON r.id = rs.route_id
LEFT JOIN route_metrics rm ON r.id = rm.route_id
WHERE r.user_id = $1 AND r.deleted_at IS NULL
GROUP BY r.id, rm.id
ORDER BY r.created_at DESC
LIMIT $2;

-- Consumo do plano
SELECT COUNT(*) as routes_count
FROM routes
WHERE user_id = $1 AND deleted_at IS NULL
AND created_at >= DATE_TRUNC('month', NOW());
```

## üîç **AUDITORIA E LOGS**

### **Logs de Auditoria**

```sql
-- Inserir log de auditoria
INSERT INTO audit_logs (user_id, action, table_name, record_id, old_values, new_values, ip_address, user_agent, created_at)
VALUES ($1, $2, $3, $4, $5, $6, $7, $8, NOW());

-- Consultar logs
SELECT * FROM audit_logs
WHERE user_id = $1
ORDER BY created_at DESC
LIMIT 100;
```

---

# üèóÔ∏è ESTRUTURA DO BANCO DE DADOS

## **TABELAS PRINCIPAIS (19 tabelas)**

### üë§ **USU√ÅRIOS E AUTENTICA√á√ÉO**

**`users`** - Dados principais dos usu√°rios

- `id` (UUID, PK)
- `name` (VARCHAR, NOT NULL)
- `email` (VARCHAR, UNIQUE, NOT NULL)
- `password_hash` (VARCHAR, NOT NULL)
- `phone` (VARCHAR)
- `company` (VARCHAR)
- `country` (VARCHAR)
- `city` (VARCHAR)
- `avatar_url` (TEXT)
- `plan_type` (VARCHAR DEFAULT 'basic')
- `plan_expires_at` (TIMESTAMP)
- `is_active` (BOOLEAN DEFAULT true)
- `is_email_verified` (BOOLEAN DEFAULT false)
- `last_login_at` (TIMESTAMP)
- `created_at` (TIMESTAMP DEFAULT NOW())
- `updated_at` (TIMESTAMP DEFAULT NOW())
- `deleted_at` (TIMESTAMP)

**`auth_sessions`** - Sess√µes de autentica√ß√£o

- `id` (UUID, PK)
- `user_id` (UUID, FK ‚Üí users.id)
- `refresh_token` (VARCHAR)
- `refresh_token_hash` (VARCHAR)
- `is_active` (BOOLEAN DEFAULT true)
- `expires_at` (TIMESTAMP)
- `user_agent` (TEXT)
- `ip_address` (INET)
- `created_at` (TIMESTAMP DEFAULT NOW())

**`user_preferences`** - Prefer√™ncias do usu√°rio

- `id` (UUID, PK)
- `user_id` (UUID, FK ‚Üí users.id)
- `theme` (VARCHAR DEFAULT 'dark')
- `language` (VARCHAR DEFAULT 'pt-BR')
- `push_notifications` (BOOLEAN DEFAULT true)
- `email_notifications` (BOOLEAN DEFAULT true)
- `font_size` (VARCHAR DEFAULT 'medium')
- `density` (VARCHAR DEFAULT 'comfortable')
- `default_map_mode` (VARCHAR DEFAULT 'hybrid')
- `offline_maps_enabled` (BOOLEAN DEFAULT false)
- `auto_night_mode` (BOOLEAN DEFAULT true)
- `voice_guidance` (BOOLEAN DEFAULT true)
- `route_optimization_mode` (VARCHAR DEFAULT 'time')
- `created_at` (TIMESTAMP DEFAULT NOW())
- `updated_at` (TIMESTAMP DEFAULT NOW())

**`user_stats`** - Estat√≠sticas do usu√°rio

- `id` (UUID, PK)
- `user_id` (UUID, FK ‚Üí users.id)
- `total_routes` (INTEGER DEFAULT 0)
- `completed_routes` (INTEGER DEFAULT 0)
- `total_distance` (DECIMAL)
- `total_time_saved` (INTEGER)
- `total_fuel_saved` (DECIMAL)
- `average_rating` (DECIMAL)
- `created_at` (TIMESTAMP DEFAULT NOW())
- `updated_at` (TIMESTAMP DEFAULT NOW())

### üó∫Ô∏è **ROTAS E NAVEGA√á√ÉO**

**`routes`** - Rotas criadas pelos usu√°rios

- `id` (UUID, PK)
- `user_id` (UUID, FK ‚Üí users.id)
- `name` (VARCHAR, NOT NULL)
- `description` (TEXT)
- `responsible` (VARCHAR)
- `priority` (VARCHAR DEFAULT 'medium')
- `status` (VARCHAR DEFAULT 'draft')
- `route_type` (VARCHAR DEFAULT 'logistics')
- `scheduled_date` (TIMESTAMP)
- `started_at` (TIMESTAMP)
- `completed_at` (TIMESTAMP)
- `is_favorite` (BOOLEAN DEFAULT false)
- `route_set_id` (UUID, FK ‚Üí route_sets.id)
- `created_at` (TIMESTAMP DEFAULT NOW())
- `updated_at` (TIMESTAMP DEFAULT NOW())
- `deleted_at` (TIMESTAMP)

**`route_stops`** - Paradas das rotas

- `id` (UUID, PK)
- `route_id` (UUID, FK ‚Üí routes.id)
- `stop_order` (INTEGER, NOT NULL)
- `name` (VARCHAR, NOT NULL)
- `address` (TEXT)
- `latitude` (DECIMAL, NOT NULL)
- `longitude` (DECIMAL, NOT NULL)
- `client_id` (UUID, FK ‚Üí clients.id)
- `estimated_duration` (INTEGER)
- `is_completed` (BOOLEAN DEFAULT false)
- `completed_at` (TIMESTAMP)
- `time_spent_at_stop` (INTEGER)
- `notes` (TEXT)
- `created_at` (TIMESTAMP DEFAULT NOW())

**`route_sets`** - Conjuntos de rotas

- `id` (UUID, PK)
- `user_id` (UUID, FK ‚Üí users.id)
- `name` (VARCHAR, NOT NULL)
- `description` (TEXT)
- `color` (VARCHAR)
- `is_active` (BOOLEAN DEFAULT true)
- `created_at` (TIMESTAMP DEFAULT NOW())
- `updated_at` (TIMESTAMP DEFAULT NOW())

**`navigation_sessions`** - Sess√µes de navega√ß√£o ativa

- `id` (UUID, PK)
- `route_id` (UUID, FK ‚Üí routes.id)
- `user_id` (UUID, FK ‚Üí users.id)
- `status` (VARCHAR DEFAULT 'active')
- `navigation_mode` (VARCHAR DEFAULT 'driving')
- `start_time` (TIMESTAMP)
- `end_time` (TIMESTAMP)
- `current_stop_index` (INTEGER DEFAULT 0)
- `current_latitude` (DECIMAL)
- `current_longitude` (DECIMAL)
- `total_distance` (DECIMAL)
- `remaining_distance` (DECIMAL)
- `active_time` (INTEGER DEFAULT 0)
- `estimated_fuel_consumption` (DECIMAL)
- `created_at` (TIMESTAMP DEFAULT NOW())
- `updated_at` (TIMESTAMP DEFAULT NOW())

**`route_metrics`** - M√©tricas de performance das rotas

- `id` (UUID, PK)
- `route_id` (UUID, FK ‚Üí routes.id)
- `total_distance` (DECIMAL)
- `estimated_duration` (INTEGER)
- `actual_duration` (INTEGER)
- `fuel_consumption` (DECIMAL)
- `fuel_savings` (DECIMAL)
- `time_savings` (INTEGER)
- `average_speed` (DECIMAL)
- `created_at` (TIMESTAMP DEFAULT NOW())

### üè¢ **CLIENTES**

**`clients`** - Clientes dos usu√°rios

- `id` (UUID, PK)
- `user_id` (UUID, FK ‚Üí users.id)
- `name` (VARCHAR, NOT NULL)
- `email` (VARCHAR)
- `phone` (VARCHAR)
- `company` (VARCHAR)
- `address` (TEXT)
- `city` (VARCHAR)
- `state` (VARCHAR)
- `country` (VARCHAR)
- `latitude` (DECIMAL)
- `longitude` (DECIMAL)
- `notes` (TEXT)
- `tags` (TEXT[])
- `is_active` (BOOLEAN DEFAULT true)
- `created_at` (TIMESTAMP DEFAULT NOW())
- `updated_at` (TIMESTAMP DEFAULT NOW())
- `deleted_at` (TIMESTAMP)

**`client_stops`** - Hist√≥rico de paradas em clientes

- `id` (UUID, PK)
- `client_id` (UUID, FK ‚Üí clients.id)
- `route_id` (UUID, FK ‚Üí routes.id)
- `visited_at` (TIMESTAMP)
- `duration` (INTEGER)
- `notes` (TEXT)
- `created_at` (TIMESTAMP DEFAULT NOW())

### üìç **PONTOS DE INTERESSE**

**`pois`** - Pontos de interesse

- `id` (UUID, PK)
- `user_id` (UUID, FK ‚Üí users.id)
- `name` (VARCHAR, NOT NULL)
- `type` (VARCHAR)
- `description` (TEXT)
- `latitude` (DECIMAL, NOT NULL)
- `longitude` (DECIMAL, NOT NULL)
- `address` (TEXT)
- `phone` (VARCHAR)
- `website` (VARCHAR)
- `business_hours` (JSONB)
- `metadata` (JSONB)
- `rating` (DECIMAL DEFAULT 0)
- `is_verified` (BOOLEAN DEFAULT false)
- `created_at` (TIMESTAMP DEFAULT NOW())
- `updated_at` (TIMESTAMP DEFAULT NOW())
- `deleted_at` (TIMESTAMP)

### üí≥ **BILLING E PAGAMENTOS**

**`plans`** - Planos de assinatura

- `id` (UUID, PK)
- `name` (VARCHAR, NOT NULL)
- `description` (TEXT)
- `price_cents` (INTEGER, NOT NULL)
- `currency` (VARCHAR DEFAULT 'BRL')
- `billing_period` (VARCHAR DEFAULT 'monthly')
- `routes_limit` (INTEGER)
- `api_calls_limit` (INTEGER)
- `features` (JSONB)
- `is_active` (BOOLEAN DEFAULT true)
- `created_at` (TIMESTAMP DEFAULT NOW())
- `updated_at` (TIMESTAMP DEFAULT NOW())

**`subscriptions`** - Assinaturas dos usu√°rios

- `id` (UUID, PK)
- `user_id` (UUID, FK ‚Üí users.id)
- `plan_id` (UUID, FK ‚Üí plans.id)
- `stripe_subscription_id` (VARCHAR)
- `status` (VARCHAR, NOT NULL)
- `start_date` (TIMESTAMP)
- `end_date` (TIMESTAMP)
- `cancelled_at` (TIMESTAMP)
- `amount_cents` (INTEGER)
- `currency` (VARCHAR DEFAULT 'BRL')
- `billing_period` (VARCHAR)
- `routes_limit` (INTEGER)
- `created_at` (TIMESTAMP DEFAULT NOW())
- `updated_at` (TIMESTAMP DEFAULT NOW())

**`payment_history`** - Hist√≥rico de pagamentos

- `id` (UUID, PK)
- `user_id` (UUID, FK ‚Üí users.id)
- `subscription_id` (UUID, FK ‚Üí subscriptions.id)
- `stripe_payment_intent_id` (VARCHAR)
- `amount_cents` (INTEGER, NOT NULL)
- `currency` (VARCHAR DEFAULT 'BRL')
- `status` (VARCHAR, NOT NULL)
- `payment_method` (VARCHAR)
- `description` (TEXT)
- `metadata` (JSONB)
- `created_at` (TIMESTAMP DEFAULT NOW())

### üîî **NOTIFICA√á√ïES**

**`notifications`** - Notifica√ß√µes dos usu√°rios

- `id` (UUID, PK)
- `user_id` (UUID, FK ‚Üí users.id)
- `type` (VARCHAR, NOT NULL)
- `title` (VARCHAR, NOT NULL)
- `message` (TEXT, NOT NULL)
- `details` (JSONB)
- `read_at` (TIMESTAMP)
- `archived_at` (TIMESTAMP)
- `actionable` (BOOLEAN DEFAULT false)
- `action_url` (VARCHAR)
- `action_label` (VARCHAR)
- `route_id` (UUID, FK ‚Üí routes.id)
- `navigation_session_id` (UUID, FK ‚Üí navigation_sessions.id)
- `icon` (VARCHAR)
- `color` (VARCHAR)
- `priority` (VARCHAR DEFAULT 'normal')
- `expires_at` (TIMESTAMP)
- `created_at` (TIMESTAMP DEFAULT NOW())
- `updated_at` (TIMESTAMP DEFAULT NOW())
- `deleted_at` (TIMESTAMP)

### üîç **SISTEMA E AUDITORIA**

**`search_results`** - Cache de resultados de busca

- `id` (UUID, PK)
- `user_id` (UUID, FK ‚Üí users.id)
- `query` (VARCHAR, NOT NULL)
- `results` (JSONB)
- `source` (VARCHAR)
- `created_at` (TIMESTAMP DEFAULT NOW())
- `expires_at` (TIMESTAMP)

**`system_config`** - Configura√ß√µes do sistema

- `id` (UUID, PK)
- `key` (VARCHAR, UNIQUE, NOT NULL)
- `value` (JSONB)
- `description` (TEXT)
- `is_active` (BOOLEAN DEFAULT true)
- `created_at` (TIMESTAMP DEFAULT NOW())
- `updated_at` (TIMESTAMP DEFAULT NOW())

**`audit_logs`** - Logs de auditoria

- `id` (UUID, PK)
- `user_id` (UUID, FK ‚Üí users.id)
- `action` (VARCHAR, NOT NULL)
- `table_name` (VARCHAR)
- `record_id` (UUID)
- `old_values` (JSONB)
- `new_values` (JSONB)
- `ip_address` (INET)
- `user_agent` (TEXT)
- `created_at` (TIMESTAMP DEFAULT NOW())

---

# üîß CONFIGURA√á√ïES E VARI√ÅVEIS

## **VARI√ÅVEIS DE AMBIENTE**

### **üîë Obrigat√≥rias**

```bash
# Database
DATABASE_URL=postgresql://username:password@host/database?sslmode=require

# JWT
JWT_SECRET=sua_jwt_secret_key_super_segura_aqui

# Mapbox
VITE_MAPBOX_ACCESS_TOKEN=pk.eyJ1IjoicmFwaGFueSIsImEiOiJjbWVuOTBpcDMwdnBxMmlweGp0cmc4a2s0In0.KwsjXFJmloQvThFvFGjOdA
```

### **‚öôÔ∏è Opcionais**

```bash
# Servidor
NODE_ENV=development
PORT=8080
FRONTEND_URL=http://localhost:8080

# Autentica√ß√£o
BCRYPT_ROUNDS=12
SESSION_SECRET=sua_session_secret_aqui

# Stripe (Billing)
STRIPE_SECRET_KEY=sk_test_...
STRIPE_WEBHOOK_SECRET=whsec_...

# Rate Limiting
RATE_LIMIT_WINDOW_MS=900000  # 15 minutos
RATE_LIMIT_MAX=100           # requests por IP
AUTH_RATE_LIMIT_MAX=5        # tentativas de login

# Mapbox (alternativo)
MAPBOX_ACCESS_TOKEN=pk.eyJ1IjoicmFwaGFueSIsImEiOiJjbWVuOTBpcDMwdnBxMmlweGp0cmc4a2s0In0.KwsjXFJmloQvThFvFGjOdA
```

## **üîó CONFIGURA√á√ïES DE SERVI√áOS**

### **Neon Database**

- **Host:** sa-east-1.aws.neon.tech
- **Regi√£o:** AWS South America (S√£o Paulo)
- **Vers√£o PostgreSQL:** 17
- **SSL:** Obrigat√≥rio
- **Pool de Conex√µes:** Ativo
- **Backup:** Autom√°tico (24h)

### **Mapbox Services**

- **Geocoding API:** ‚úÖ Ativo
- **Directions API:** ‚úÖ Ativo
- **Optimization API:** ‚úÖ Ativo
- **Matrix API:** ‚úÖ Ativo
- **Isochrone API:** ‚úÖ Ativo
- **Rate Limit:** 50,000 requests/m√™s (free tier)

### **Rate Limiting**

- **Geral:** 100 requests/15min por IP
- **Autentica√ß√£o:** 5 tentativas/15min por IP
- **Mapbox:** 10 requests/min por usu√°rio
- **Billing:** 20 requests/hour por usu√°rio

---

# üìÅ ARQUITETURA DO PROJETO

## **üèóÔ∏è ESTRUTURA DE PASTAS**

```
viwe-project/
‚îú‚îÄ‚îÄ client/                    # Frontend React
‚îÇ   ‚îú‚îÄ‚îÄ components/           # Componentes reutiliz√°veis
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ui/              # UI primitivos (buttons, inputs, etc.)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ shared/          # Componentes compartilhados
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ desktop/         # Componentes espec√≠ficos desktop
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ mobile/          # Componentes espec√≠ficos mobile
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ tablet/          # Componentes espec√≠ficos tablet
‚îÇ   ‚îú‚îÄ‚îÄ pages/               # P√°ginas da aplica√ß√£o
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ internal/        # P√°ginas autenticadas
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ *.tsx            # P√°ginas p√∫blicas
‚îÇ   ‚îú‚îÄ‚îÄ contexts/            # Contextos React
‚îÇ   ‚îú‚îÄ‚îÄ hooks/               # Custom hooks
‚îÇ   ‚îú‚îÄ‚îÄ layouts/             # Layouts responsivos
‚îÇ   ‚îú‚îÄ‚îÄ lib/                 # Utilit√°rios e configura√ß√µes
‚îÇ   ‚îú‚îÄ‚îÄ services/            # Servi√ßos de API
‚îÇ   ‚îî‚îÄ‚îÄ App.tsx              # Entry point
‚îú‚îÄ‚îÄ server/                   # Backend Express
‚îÇ   ‚îú‚îÄ‚îÄ src/                 # C√≥digo principal
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ routes/          # Rotas da API
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ middleware/      # Middlewares
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ utils/           # Utilit√°rios
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.js         # Entry point
‚îÇ   ‚îú‚îÄ‚îÄ scripts/             # Scripts auxiliares
‚îÇ   ‚îî‚îÄ‚îÄ config/              # Configura√ß√µes
‚îú‚îÄ‚îÄ shared/                   # Tipos compartilhados
‚îú‚îÄ‚îÄ scripts/                  # Scripts de setup/deploy
‚îî‚îÄ‚îÄ docs/                     # Documenta√ß√£o
```

## **üîÑ FLUXO DE DADOS**

### **Autentica√ß√£o**

```
Frontend ‚Üí POST /api/auth/login ‚Üí Database ‚Üí JWT Tokens ‚Üí Frontend Storage
```

### **Navega√ß√£o em Tempo Real**

```
Frontend ‚Üí WebSocket Connection ‚Üí Backend ‚Üí Database Updates ‚Üí Real-time UI
```

### **Cria√ß√£o de Rotas**

```
Frontend ‚Üí POST /api/routes ‚Üí Mapbox Optimization ‚Üí Database ‚Üí Response
```

---

# üîë MIDDLEWARES E SEGURAN√áA

## **üõ°Ô∏è MIDDLEWARES IMPLEMENTADOS**

### **Autentica√ß√£o (`authenticateToken`)**

```javascript
// Valida JWT token em rotas protegidas
const authenticateToken = (req, res, next) => {
  const authHeader = req.headers["authorization"];
  const token = authHeader && authHeader.split(" ")[1];

  if (!token) {
    return res.status(401).json({ error: "Token de acesso requerido" });
  }

  jwt.verify(token, process.env.JWT_SECRET, (err, user) => {
    if (err) return res.status(403).json({ error: "Token inv√°lido" });
    req.user = user;
    next();
  });
};
```

### **Rate Limiting**

```javascript
// Rate limiting geral (100 requests/15min)
const generalLimiter = rateLimit({
  windowMs: 15 * 60 * 1000,
  max: 100,
  message: { error: "Muitas requisi√ß√µes, tente novamente em 15 minutos." },
  trustProxy: true,
});

// Rate limiting para autentica√ß√£o (5 tentativas/15min)
const authLimiter = rateLimit({
  windowMs: 15 * 60 * 1000,
  max: 5,
  message: {
    error: "Muitas tentativas de login, tente novamente em 15 minutos.",
  },
  skipSuccessfulRequests: true,
  trustProxy: true,
});
```

### **Seguran√ßa (`helmet`)**

```javascript
// Configura√ß√£o de seguran√ßa
helmet({
  crossOriginEmbedderPolicy: false,
  contentSecurityPolicy: {
    directives: {
      defaultSrc: ["'self'"],
      styleSrc: ["'self'", "'unsafe-inline'"],
      scriptSrc: ["'self'"],
      connectSrc: ["'self'", "*.mapbox.com"],
    },
  },
});
```

### **CORS**

```javascript
// Configura√ß√£o CORS
cors({
  origin: process.env.FRONTEND_URL || "http://localhost:8080",
  credentials: true,
  methods: ["GET", "POST", "PUT", "DELETE", "PATCH", "OPTIONS"],
  allowedHeaders: ["Content-Type", "Authorization", "x-requested-with"],
});
```

## **üîê POL√çTICAS DE SEGURAN√áA**

### **Senhas**

- **Hash:** bcrypt com 12 rounds
- **Valida√ß√£o:** M√≠nimo 6 caracteres
- **Expira√ß√£o:** Refresh tokens (30 dias)

### **Sess√µes**

- **JWT Access Token:** 1 hora de validade
- **Refresh Token:** 30 dias de validade
- **Revoga√ß√£o:** Logout invalida todas as sess√µes

### **Rate Limits por Endpoint**

- `/api/auth/*`: 5 requests/15min
- `/api/mapbox/*`: 10 requests/min
- `/api/billing/*`: 20 requests/hour
- Geral: 100 requests/15min

---

# ‚ö° SERVI√áOS INTEGRADOS

## **üó∫Ô∏è MAPBOX SERVICES**

### **Configura√ß√£o**

```javascript
const MAPBOX_BASE_URL = "https://api.mapbox.com";
const MAPBOX_TOKEN = process.env.VITE_MAPBOX_ACCESS_TOKEN;
```

### **Endpoints Utilizados**

- **Geocoding:** `GET /geocoding/v5/mapbox.places/{query}.json`
- **Directions:** `GET /directions/v5/mapbox/{profile}/{coordinates}`
- **Optimization:** `GET /optimized-trips/v1/mapbox/{profile}/{coordinates}`
- **Matrix:** `GET /directions-matrix/v1/mapbox/{profile}/{coordinates}`
- **Isochrone:** `GET /isochrone/v1/mapbox/{profile}/{coordinates}`

### **Rate Limits**

- **Free Tier:** 50,000 requests/m√™s
- **Paid Tier:** Conforme plano contratado

## **üíæ NEON DATABASE**

### **Configura√ß√£o**

```javascript
import { neon } from "@neondatabase/serverless";
const sql = neon(process.env.DATABASE_URL);
```

### **Features Utilizadas**

- **Connection Pooling:** ‚úÖ Ativo
- **Auto-scaling:** ‚úÖ Ativo (0.25-2 CU)
- **Backup Autom√°tico:** ‚úÖ 24h retention
- **SSL:** ‚úÖ Obrigat√≥rio
- **Regi√µes:** AWS South America (S√£o Paulo)

### **Limites**

- **Free Tier:** 3GB storage, 100 horas compute/m√™s
- **Pro Tier:** Conforme plano contratado

## **üí≥ STRIPE BILLING**

### **Configura√ß√£o**

```javascript
const stripe = require("stripe")(process.env.STRIPE_SECRET_KEY);
```

### **Webhooks Implementados**

- `payment_intent.succeeded`
- `invoice.payment_succeeded`
- `customer.subscription.updated`
- `customer.subscription.deleted`

### **Planos Dispon√≠veis**

- **B√°sico:** R$ 29/m√™s - 100 rotas
- **Premium:** R$ 79/m√™s - 500 rotas
- **Enterprise:** R$ 199/m√™s - Ilimitado

---

# üìä ESTAT√çSTICAS E M√âTRICAS

## **üìà M√âTRICAS COLETADAS**

### **Usu√°rio**

- Total de rotas criadas
- Dist√¢ncia total percorrida
- Tempo economizado
- Combust√≠vel economizado
- Taxa de conclus√£o de rotas

### **Sistema**

- Requests por endpoint
- Tempo de resposta m√©dio
- Erros por tipo
- Uso de recursos (CPU/Mem√≥ria)
- Taxa de sucesso das opera√ß√µes

### **Mapbox**

- Requests por servi√ßo
- Cache hit rate
- Lat√™ncia m√©dia
- Quota utilizada

---

# üîÑ FLUXOS PRINCIPAIS

## **üöÄ FLUXO DE REGISTRO**

1. `POST /api/auth/register` ‚Üí Valida√ß√£o de dados
2. Hash da senha (bcrypt)
3. Cria√ß√£o do usu√°rio na base
4. Cria√ß√£o de prefer√™ncias padr√£o
5. Gera√ß√£o de tokens JWT
6. Resposta com dados do usu√°rio + tokens

## **üîê FLUXO DE LOGIN**

1. `POST /api/auth/login` ‚Üí Valida√ß√£o de credenciais
2. Verifica√ß√£o de senha (bcrypt.compare)
3. Atualiza√ß√£o de `last_login_at`
4. Cria√ß√£o de sess√£o de autentica√ß√£o
5. Gera√ß√£o de access + refresh tokens
6. Resposta com dados do usu√°rio + tokens

## **üó∫Ô∏è FLUXO DE CRIA√á√ÉO DE ROTA**

1. `POST /api/routes` ‚Üí Valida√ß√£o de dados
2. Chamada para Mapbox Optimization API
3. Cria√ß√£o da rota na base (transa√ß√£o)
4. Cria√ß√£o das paradas ordenadas
5. C√°lculo de m√©tricas estimadas
6. Log de auditoria
7. Resposta com rota criada

## **üß≠ FLUXO DE NAVEGA√á√ÉO**

1. `POST /api/navigation/start` ‚Üí Valida√ß√£o de rota
2. Cria√ß√£o de sess√£o de navega√ß√£o
3. Atualiza√ß√£o de status da rota
4. WebSocket connection (tempo real)
5. Updates de posi√ß√£o (`PATCH /api/navigation/:id`)
6. Completar paradas (`POST /api/navigation/:id/complete-stop`)
7. Finaliza√ß√£o e c√°lculo de m√©tricas

---

# üéØ PR√ìXIMOS PASSOS (ROADMAP)

## **üìÖ SEMANA 1 - CR√çTICO**

- [ ] ‚úÖ Database schema (19 tabelas) - **CONCLU√çDO**
- [x] ‚úÖ Frontend ‚Üî Backend integration - **EM PROGRESSO**
- [ ] üîß Mapbox validation & fallback
- [ ] üîê Auth middleware & refresh tokens

## **üìÖ SEMANA 2 - ESSENCIAL**

- [ ] üß≠ Real-time navigation
- [ ] üó∫Ô∏è Navigation UI components
- [ ] üõ£Ô∏è Complete route system
- [ ] üìç POIs management

## **üìÖ SEMANA 3 - IMPORTANTE**

- [ ] üí≥ Billing & subscription system
- [ ] üîî Notifications system
- [ ] üìä Metrics & analytics
- [ ] ‚ö° Route optimization engine

## **üìÖ SEMANA 4 - POLIMENTO**

- [ ] üß™ Testing & quality assurance
- [ ] üì± Mobile responsiveness
- [ ] üîß Infrastructure & monitoring
- [ ] üé® UX/UI polishing

---

# üìù NOTAS IMPORTANTES

## **‚ö†Ô∏è LIMITA√á√ïES CONHECIDAS**

- Mapbox free tier: 50k requests/m√™s
- Neon free tier: 3GB storage
- Rate limiting pode afetar UX em picos
- WebSocket ainda n√£o implementado

## **üîß MELHORIAS PLANEJADAS**

- Cache de rotas otimizadas
- Compress√£o de responses
- CDN para assets est√°ticos
- Monitoring & alerting
- Backup strategy

## **üìö DOCUMENTA√á√ÉO ADICIONAL**

- API Testing: Postman collection
- Database ERD: Lucidchart diagram
- Architecture: System design docs
- Deployment: CI/CD pipeline docs

---

**üìû CONTATO T√âCNICO**  
**Email:** tech@viwe.com.br  
**Slack:** #viwe-development  
**√öltima Atualiza√ß√£o:** 2025-01-25

---

_Este documento √© atualizado automaticamente a cada deploy e deve ser a fonte √∫nica da verdade para o projeto Viwe._
